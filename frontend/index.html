<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>案例库</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- 样式 -->
  <link rel="stylesheet" href="/static/styles.css" />
  <link rel="stylesheet" href="/static/project-editor.css" />
  <link rel="stylesheet" href="/static/project-batch-editor.css" />
</head>
<body>
  <div class="app-root">
    <header class="app-header">
      <h1 class="app-title">案例库</h1>

      <div class="tab-bar">
        <button class="tab-button active" data-tab="projects">项目</button>
        <button class="tab-button" data-tab="waterfall">瀑布</button>
      </div>

      <div class="toolbar">
        <div class="search-box">
          <input
            id="search-input"
            type="text"
            placeholder="搜索项目 / 图片标签 / 文件名..."
          />
          <button
            id="search-clear-btn"
            type="button"
            class="search-clear-btn"
            aria-label="清空搜索"
          >
            ×
          </button>
        </div>

        <button id="search-btn">搜索</button>

        <!-- 排序选择 -->
        <select
          id="sort-select"
          class="toolbar-secondary sort-select"
          title="排序方式"
        >
          <option value="heat">按总热度</option>
          <option value="recent">按近期热度</option>
          <option value="updated">按更新时间</option>
          <option value="name">按项目名称</option>
          <option value="location">按地点</option>
          <option value="architect">按建筑师</option>
        </select>

        <button
          id="refresh-projects-btn"
          class="toolbar-secondary"
          type="button"
          title="刷新案例库"
        >
          刷新
        </button>

        <button
          id="open-web-import-btn"
          class="toolbar-secondary"
          type="button"
          title="从网站导入新项目"
        >
          导入
        </button>

        <!-- 总编辑按钮：✎ 编辑 / 退出编辑 -->
        <button
          id="toggle-edit-mode-btn"
          class="toolbar-secondary"
          type="button"
          title="编辑项目"
        >
          ✎ 编辑
        </button>
      </div>
      
      <!-- 新增：标签栏容器 -->
      <div id="tag-strip" class="tag-strip"></div>

    </header>

    <main class="app-main">
      <!-- 按项目视图 -->
      <section id="tab-projects" class="tab-panel active">
        <div id="projects-container" class="projects-grid">
          <!-- 通过 app.js 动态插入项目卡片 -->
        </div>
      </section>

      <!-- 按图片（瀑布流）视图 -->
      <section id="tab-waterfall" class="tab-panel">
        <div id="waterfall-container" class="waterfall-grid">
          <!-- 通过 app.js 动态插入图片 -->
        </div>
      </section>
    </main>
  </div>

  <!-- 回到顶部按钮 -->
  <button id="back-to-top" class="back-to-top-btn">
    ↑
  </button>

  <!-- 先加载两个编辑器，再加载主逻辑 -->
  <script src="/static/project-editor.js"></script>
  <script src="/static/project-batch-editor.js"></script>
  <script src="/static/app.js"></script>
  <script src="/static/favorites.js"></script>
  <script>
    window.addEventListener("DOMContentLoaded", function () {
      // 后端 collections 路由前缀是 /api/collections，所以这里传 /api
      if (window.Favorites) {
        Favorites.init({ apiBaseUrl: "/api" });
      }
    });
  </script>

</body>
</html>
